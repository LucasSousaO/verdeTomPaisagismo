<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#1f7a4a" />

  <title>Blog | Verde Tom Paisagismo</title>
  <meta name="description" content="Dicas de plantas, manutenção e paisagismo em BH e região. Conteúdo para orientar decisões e melhorar o cuidado com o jardim." />
  <link rel="canonical" href="https://SEUUSUARIO.github.io/SEUREPO/blog.html" />
  <meta name="robots" content="index,follow" />

  <link rel="icon" href="assets/images/logo.webp" />
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>

<body>
 <header class="site-header">
  <div class="header-inner">
    <a href="/verdeTomPaisagismo" class="logo" aria-label="Voltar para a Home">
      <img src="assets/images/logo.webp" alt="Verde Tom Paisagismo">
    </a>

    <!-- Botão do menu (aparece só no mobile) -->
<button class="menu-btn" type="button" aria-label="Abrir menu" aria-expanded="false" aria-controls="mainNav">
  <span></span>
  <span></span>
  <span></span>
  <span class="menu-label"></span>
</button>

    <nav class="main-nav" id="mainNav" aria-label="Menu principal">
      <a href="trabalhos.html">projetos</a>
      <a href="atuacao.html">atuação</a>
      <a href="sobre.html">sobre</a>
      <a href="blog.html">blog</a>
      <a href="contato.html">contato</a>
    </nav>
  </div>
</header>

  <main class="section">
    <div class="container">
      <h1 style="margin:0 0 10px">Blog</h1>
      <p class="small">Conteúdo para orientar decisões. Para orçamento, use o formulário (com cidade e serviço) e envie pelo WhatsApp.</p>

      <div class="grid-2" style="margin-top:14px">
        <article class="feature">
          <h3>Como reduzir manutenção do jardim sem perder beleza</h3>
          <p>Escolha de espécies, cobertura de solo e organização de canteiros influenciam diretamente tempo e custo.</p>
          <p class="small"><b>Dica prática:</b> priorize forrações que cobrem solo e reduzem mato/erosão.</p>
        </article>

        <article class="feature">
          <h3>3 erros comuns em jardins de condomínios</h3>
          <p>Excesso de espécies, irrigação mal planejada e podas incorretas geram retrabalho e custo recorrente.</p>
          <p class="small">Se for área comum, a manutenção precisa ser previsível.</p>
        </article>

        <article class="feature">
          <h3>Quando vale mais fazer reforma do que “remendar”</h3>
          <p>Se há plantas inadequadas, drenagem ruim e visual desorganizado, uma reforma pode reduzir custo no longo prazo.</p>
        </article>

        <article class="feature">
          <h3>Atendimento em BH e região: como funciona a visita técnica</h3>
          <p>Alinhamos objetivos, analisamos condições do local e propomos soluções com melhor custo-benefício.</p>
          <div class="hero-actions" style="margin-top:10px">
            <a class="cta" href="contato.html">Solicitar avaliação</a>
          </div>
        </article>
      </div>
    </div>

    <section class="section">
  <div class="container">
    <h1>Blog</h1>
    <div id="blogGrid" class="grid-3"></div>
  </div>
  function parseCSV(text){
    const lines = text.trim().split("\n");
    const headers = lines.shift().split(",");

    return lines.map(line => {
      const values = line.split(",");
      const obj = {};
      headers.forEach((h, i) => obj[h.trim()] = (values[i] || "").trim());
      return obj;
    });
  }

  try{
    const res = await fetch(CSV_URL, { cache: "no-store" });
    if(!res.ok) throw new Error("Erro ao buscar CSV");

    const csv = await res.text();
    const posts = parseCSV(csv)
      .filter(p => (p.status || "").toLowerCase() === "publicado");

    const grid = document.getElementById("blogGrid");
    grid.innerHTML = posts.map(p => `
      <article class="card">
        <img src="${p.imagemUrl}" alt="${p.titulo}">
        <h3>${p.titulo}</h3>
        <p>${p.textoCentral}</p>
      </article>
    `).join("");

  } catch(err){
    console.error(err);
  }
})();
</script>
</section>

<script>
(async function(){
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTdP_h8M1SSBrqtxsH0j0V6eQ9MN66HX4JhSG0KgP_wyGVZmVAfzMX_J-MFPqc90c54N4vpkjakM0pj/pub?gid=0&single=true&output=csv";
  function parseCSV(text){
    const rows = [];
    let row = [];
    let cur = "";
    let inQuotes = false;

    for (let i = 0; i < text.length; i++){
      const c = text[i];
      const n = text[i+1];

      if (c === '"' && inQuotes && n === '"'){ cur += '"'; i++; continue; }
      if (c === '"'){ inQuotes = !inQuotes; continue; }

      if (c === ',' && !inQuotes){
        row.push(cur);
        cur = "";
        continue;
      }
      if ((c === '\n' || c === '\r') && !inQuotes){
        if (cur.length || row.length){
          row.push(cur);
          rows.push(row);
        }
        cur = "";
        row = [];
        if (c === '\r' && n === '\n') i++;
        continue;
      }
      cur += c;
    }
    if (cur.length || row.length){
      row.push(cur);
      rows.push(row);
    }

    const headers = rows.shift().map(h => h.replace(/^\uFEFF/, "").trim());
    return rows
      .filter(r => r.some(v => String(v||"").trim().length))
      .map(r => {
        const obj = {};
        headers.forEach((h, idx) => obj[h] = String(r[idx] ?? "").trim());
        return obj;
      });
  }

  function truncateByDevice(text){
    const clean = String(text || "").trim();
    const isMobile = window.matchMedia("(max-width: 768px)").matches;
    const limit = isMobile ? 30 : 60;
    if (clean.length <= limit) return clean;
    return clean.slice(0, limit).trimEnd() + "…";
  }

  // Modal helpers
  const modal = document.getElementById("postModal");
  const btnClose = modal?.querySelector(".modal-close");
  const pmImage = document.getElementById("pmImage");
  const pmTitle = document.getElementById("pmTitle");
  const pmAuthor = document.getElementById("pmAuthor");
  const pmAuthorPhoto = document.getElementById("pmAuthorPhoto");
  const pmDate = document.getElementById("pmDate");
  const pmBody = document.getElementById("pmBody");

  function openModal(post){
    if(!modal) return;
    modal.classList.add("open");
    modal.setAttribute("aria-hidden", "false");

    pmTitle.textContent = post.titulo || "";
    pmAuthor.textContent = post.autor || "";
    pmDate.textContent = post.data || "";

    if (post.imagemUrl){
      pmImage.src = post.imagemUrl;
      pmImage.alt = post.titulo || "Imagem do post";
      pmImage.style.display = "block";
    } else {
      pmImage.style.display = "none";
    }

    if (post.autorFotoUrl){
      pmAuthorPhoto.src = post.autorFotoUrl;
      pmAuthorPhoto.alt = post.autor || "Autor";
      pmAuthorPhoto.style.display = "block";
    } else {
      pmAuthorPhoto.style.display = "none";
    }

    // Texto longo: usa "conteudo" se existir, senão cai no textoCentral
    pmBody.textContent = post.conteudo || post.textoCentral || "";

    // trava scroll do fundo
    document.body.style.overflow = "hidden";
  }

  function closeModal(){
    if(!modal) return;
    modal.classList.remove("open");
    modal.setAttribute("aria-hidden", "true");
    document.body.style.overflow = "";
  }

  btnClose?.addEventListener("click", closeModal);
  modal?.addEventListener("click", (e) => {
    if (e.target === modal) closeModal();
  });
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeModal();
  });

  try{
    const res = await fetch(CSV_URL, { cache: "no-store" });
    if(!res.ok) throw new Error("Falha ao buscar CSV: " + res.status);
    const csv = await res.text();

    const posts = parseCSV(csv)
      .filter(p => (p.status || "").toLowerCase() === "publicado");

    // ordena por data (YYYY-MM-DD) desc
    posts.sort((a,b) => (b.data || "").localeCompare(a.data || ""));

    const grid = document.getElementById("blogGrid");
    if(!grid) return;

    grid.innerHTML = posts.map((p, idx) => {
      const previewBase = p.textoCentral || p.conteudo || "";
      const preview = truncateByDevice(previewBase);

      return `
        <article class="card">
          ${p.imagemUrl ? `<img src="${p.imagemUrl}" alt="${p.titulo}" style="border-radius:12px; margin-bottom:12px;">` : ""}

          <h3 style="margin:0 0 8px;">${p.titulo || ""}</h3>
          <p class="small" style="margin:0 0 10px;">${preview}</p>

          <div style="display:flex; align-items:center; gap:10px;">
            ${p.autorFotoUrl ? `<img src="${p.autorFotoUrl}" alt="${p.autor}" style="width:34px;height:34px;border-radius:999px;object-fit:cover;border:1px solid var(--line);">` : ""}
            <span class="small">${p.autor || ""}</span>
          </div>

          <button class="read-more" type="button" data-post-index="${idx}">
            ler mais
          </button>
        </article>
      `;
    }).join("") || `<p class="small">Nenhum post publicado ainda.</p>`;

    // listeners do "ler mais"
    grid.querySelectorAll(".read-more").forEach(btn => {
      btn.addEventListener("click", () => {
        const i = Number(btn.getAttribute("data-post-index"));
        openModal(posts[i]);
      });
    });

  } catch(err){
    console.error(err);
  }
})();
</script>


  </main>

<footer class="site-footer">
  <div class="container footer-inner">

    <div class="footer-main">
      <a class="footer-instagram" 
         href="https://www.instagram.com/verdetompaisagismo/" 
         target="_blank" 
         rel="noopener noreferrer"
         aria-label="Instagram Cardim Paisagismo">
        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor"
            d="M7.75 2h8.5A5.76 5.76 0 0 1 22 7.75v8.5A5.76 5.76 0 0 1 16.25 22h-8.5A5.76 5.76 0 0 1 2 16.25v-8.5A5.76 5.76 0 0 1 7.75 2Zm0 1.5A4.26 4.26 0 0 0 3.5 7.75v8.5A4.26 4.26 0 0 0 7.75 20.5h8.5a4.26 4.26 0 0 0 4.25-4.25v-8.5A4.26 4.26 0 0 0 16.25 3.5h-8.5ZM12 7a5 5 0 1 1 0 10a5 5 0 0 1 0-10Zm0 1.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7Zm5.25-.88a.88.88 0 1 1 0 1.76a.88.88 0 0 1 0-1.76Z"/>
        </svg>
        instagram
      </a>

      <span class="footer-sep">•</span>

      <span>Belo Horizonte, Minas Gerais</span>
<br>
      <a href="mailto:contato@verdetompaisagismo.com.br">
        contato@verdetompaisagismo.com.br
      </a>

      <span class="footer-sep">•</span>

      <a href="wa.me/+5531987415012">
        +55 31 98741-5012
      </a>
    </div>

    <div class="footer-copy">
     © <span id="year"></span>  Verde Tom Paisagismo - Todos os direitos reservados.
    </div>

  </div>

  <script src="assets/js/main.js"></script>
</body>
</html>
